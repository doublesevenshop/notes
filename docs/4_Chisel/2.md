# Scala快速入门


## 1. 数据类型
Byte、Short、Int、Long等诸多数据类型，和Java的范围基本一致，区别是使用了首字母大写。`Unit`表示没有值的意思，和其他语言的void相同。Null表示空值或者空引用。Nothing是所有类型的子类型。Any是所有类型的超类，任何实例都属于Any类型。AnyRef是所有引用类型的超类，AnyVal是所有值类型的超类。

<p align="center">
  <img src="./image/02_1.png" alt="alt text" />
</p>

几个容易混淆的概念区别：
|名称|含义|
|---|---|
|Null|Trait，实例为null，是AnyRef子类，不是AnyVal子类|
|Nothing|Trait，所有类型子类，没有实例|
|None|Option两个子类之一，另一个是Some，用于安全的函数返回值|
|Unit|无返回值的函数类型，和void对应|
|Nil|长度为0的List|


## 2. 变量声明
Scala定义变量使用var，定义常量使用val，变量和常量类型可以省略不写，会自动推断。
每一行后都会有分号自动推断机制，不用显式写出“;”。


scala中的class和object可以传参，必须指明类型。
```scala
class Person(pname: String, page: Int) {
    val name = pname
    val age = page
}

object test (
    def main(args: Array[String]): Unit = {
        val p = new Person(pname="zhangsan", page=25)
    }
)
```

Scala类中可以传参，有了参数就有了默认的构造，传参必须要指定类型，同时也可以用val和var修饰。

类中的属性默认都有getter和setter。

那如何在类中重写构造呢？
```scala
class Person(pname: String, page: Int) {
    val name = pname
    val age = page
    var gender = 'M'
    def this(yname:String, yage:Int, ygender:Char) {
        // 先调用默认构造
        this(yname, yage)
        this.gender = ygender
    }
}

```

Scala当new class时，除了方法不执行，其他都会执行。


在同一个scala文件中，当class和object名称一样时，这个类叫做这个对象的伴生类，二者可以互相访问私有变量。

object不可以传参。


可以定义`apply`，传默认参数的时候，会调用apply，同样apply可以重载。


## 3. 简单语法
```scala
    val age = 20
    if (age <= 20) {
        println("age < 20")
    } else if() {

    } else {

    }

    for(i <- 1 to 10) {
        // to 是一个range集合，包含10
        // until 不包含10
    }

    // 可以等价成
    val r = 1.to(10)
    val r1 = 1.until(10)

    for(i <- 1 until 10) {
        for(j <- 1 until 10) {
            if(i>=j) {
                print(i+"*"+j"="i*j"\t")
            }
            if(i==j) {
                println()
            }
        }
    }

    for(i <- 1 until 10; j <- 1 until 10) {
        ...
    }

    for(i <- 1 to 1000; if(i>500);if(i%2==0)) {
        println(i)
    }

    val result = for(i <- 1 to 1000 if(i>500) if(i%2==0)) yield i
```

```scala
var i = 0
while(i < 100) {
    ...
    // 没有i++
    i = i+1
    // i += 1
}

```

## 4. 方法与函数
最常见的方法格式：
```scala
object Test {
    def main(args: Array[String]: Unit) = {
        def max(x: Int, y:Int): Int = {
           if(x > y)
                x
            else 
                y
        }
    }
}
```
方法体重最后返回值可以使用return，如果使用了return，那么方法体的返回值类型一定要指定，如果没有return，方法体的返回值可以省略，会自动推断返回值的类型。

默认将方法体中最后一行当做返回值返回。

实际上上边那个方法体可以简化，定义方法体传入的参数一定要指定类型；

```scala
def max(a: Int, b: Int): Int = if(a > b) a else b
```

方法体如果可以一行搞定，那么方法体的{}可以省略

如果定义方法时，省略了方法名称和方法体之间的=，那么无论方法体最后一行计算体的计算结果是什么，都会被丢弃，返回Unit

使用def来定义方法

2. 递归方法
```scala
def fun(num:Int): Int = {
    if(num==1) {
        1
    } else {
        num*fun(num-1)
    }
}
```
递归方法要显式声明函数类型

3. 参数有缺省值的方法
```scala
def fun(a:Int=10, b:Int=20): Int {
    a+b
}
```


4. 可变长参数的方法
```scala
def fun(s:String*) = { // 可以传同种类型的
    println(s)
    s.foreach(elem=>{println(elem)}) // =>是匿名函数的意思
    s.foreach(println(_))
    s.foreach(println)
}
```


5. 匿名函数、方法
函数和方法的区分到底是什么？
`()=>{}`
```scala
def fun = (a:Int,b:Int)=>{
    a+b
}

```

多用于方法的参数是函数时，常用匿名函数

6. 嵌套方法

```scala
def main() {
    def test1(a:Int) = {
        def test2(b:Int) = {

        }
    }
}
```
可以作为闭包

7. 偏应用函数
```scala
def showLog(date:Date,log:String) = {
    println(s"date is$date, log is $log")
}

def fun = showLog(date,_:String)
```

当方法参数非常多的时候，调用非常频繁，每次调用只有固定的某个参数变化，可以定义偏应用函数来实现。

8. 高阶函数
方法的参数是函数，方法的返回是函数，方法的参数和返回都是函数
```scala
def fun(a:Int,b:Int):Int = {
    a+b
}

def fun1(f:(Int,Int)=>Int, s:String):String = {
    val i: Int = f(100, 200)
    i+"#"+s
}

fun1(fun, "hello")
```

处理逻辑是手动传进去的,只需要调用一个方法即可。


- 方法的返回是函数：
```scala
def fun(s:String):(String,String)=>String = {
    def fun1(s1:String,s2:String):String = {
        s1+" hello "+s2
    }

    fun1
}
```

必须显式的要写出方法的返回值类型。

