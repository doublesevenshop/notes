# RISC-V汇编语言入门
## 指令入门
在学习汇编的过程中我们主要参考两套文档：
- [RISC-V的非特权指令集]()
- [Binutils文档](https://sourceware.org/binutils/docs/as/)

汇编语言是一种低级语言，它拥有诸多缺陷，例如难读、 难写、难移植，但是它又非常灵活和强大。汇编经常应用在需要直接访问底层硬件的地方，并且它可以对性能进行极致的优化。


一个完整的RISC-V汇编程序有多条语句（statement）组成。

一条经典的RISC-V汇编语句由三部分组成：

```
[label:] [operation] [comment]
```

- label: 在GNU汇编中，任何以冒号结尾的标识符都被认为是一个标号。
- operation：主要有以下四种类型
    - instruction：直接对应二进制机器指令的字符串
    - pseudo-instruction(伪指令)：为了提高编写代码的效率，用一条伪指令指示汇编器产生的多条实际指令。
    - directive(指示)：通过类似指令的形式，但是主要是给汇编器看的，进行特殊处理
    - macro：采用.macro/.endm自定义的宏。
- comment：注释，最常用的是#开头


## 指令总览
RISC-V的操作对象分为两大类：寄存器/内存
- 寄存器：32个通用寄存器，在RISC-V中，Hart在执行算数逻辑运算时所操作的数据必须直接来自寄存器。Hart在执行算数逻辑运算时操作的数据必须来自寄存器。

- 内存：Hart可以执行在寄存器和内存之间的数据读写操作，并且以Byte为基本单位进行寻址，RV32最多可以访问2^32个字节的内存空间。


x0是一个非常特殊的寄存器，实际上只读的，且永远为0，XLEN表示寄存器的位数，例如32位、64位等等。PC寄存器并不能直接访问，需要用一些特殊的技巧。


RISC-V 汇编指令编码格式

汇编指令有指令长度、指令对齐等各种概念。
- 指令长度：ILEN1=32bits （RV32I）
- 指令对齐：IALIGN=32bits（RV32I）

32个bit划分成不同的“域”，例如rd、opcode、funct3等等，funct3/funct7和opcode一起决定最终的指令类型。3表示占了3个bit，7表示占用了7个bit。

指令在内存中按照`小端`排列。

小端序的概念（主机字节序HBO-Bost Byte Order）
一个多字节整数在计算机内存中存储的字节顺序称为主机字节序，或者叫本地字节序。

不同类型的CPU的HBO不同，这与CPU的设计有关，分为大端序和小端序。

- 大端序：高位放在低字节（倒序）
- 小端序：低位先进低字节（顺序）

6种指令格式：RISUBJ，后边会具体的讲到他们的作用，现在也记不住，咱们慢慢来。

指令分类：
- 算数运算指令
- 逻辑运算指令
- 移位运算指令
- 内存读写指令
- 分支与跳转指令



## 指令进阶





## 函数调用约定



## 汇编与C混合编程

