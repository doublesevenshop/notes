## CISC vs RISC
CISC(Complex Instruction Set Computing)
针对特定的功能实现特定的指令，指令数目比较多，生成的程序相对会短一些。

RISC(Reduced Instruction Set Computing)
只定义寻常指令，复杂功能采用指令组合的方式，指令数精简，但生成的程序长度相对较长。


**问：什么是ISA的宽度**
> 实际上指的是CPU中通用寄存器的宽度，决定了寻址范围的大小、数据运算的能力。例如8位，32位、64位处理器等等。


需要注意的是，ISA宽度和指令编码的宽度无关！
例如无论是在32位还是64位的处理器上，RISC-V的指令字长都为32位。


## RISC-V ISA基本介绍
从软件业界来说，不管是操作系统，还是编译器，还是数据库等等，都有大量的开源实现，例如Linux、FreeBSD、C/LLVM、SQL等等。
但是对于硬件来说，例如X86和Arm，都并没有大量且广泛的开源架构，因此RISC-V横空出世。

RISC-V是Berkeley研发的第五代精简指令集。是2010年加州大学伯克利分校开发的一款ISA，用于科研和教学。

主要的研发人员有：
Andrew Waterman、Yunsup Lee, David Patterson, Krste Asanovic

之后的几年中RISC-V还成立了[基金会](https://riscv.org/)，适用于所有类型的计算系统，从微控制器到超级计算机，所有的厂家和个人都可以基于RISC-V开发和扩展。


RISC-V从学校发展到现在，生态发展也是越来越迅速，目前RISC-V成员已经超过700个，分布在全球50个国家和地区，而目前中国的参与也是非常强劲的。

## RISC-V指令集的特点
RISC-V指令集核心的特点就是：简单、分层清晰、模块化、稳定与社区化

RISC-V的产生比较晚，所以在设计过程中减少了很多弯路，设计更加简单。
其中特权级别便是分层的具体表现。
模块化体现在各个扩展上。
稳定化就是说它的指令集长度比较固定。
社区化就是说它可以允许进行讨论和公开，而不是由一家公司说了算。


## ISA的命名规范
对于指令集来说，它会有各种命名格式，主要可以分成三部分：
- RV：就是RISC-V的缩写
- [xxx]：表示字宽的概念
- [abcd....]：标识该处理器支持的指令集模块集合。

例如：RV32IMA，就是说RISC-V的32位支持I模块、M模块和A模块。



在历史的发展过程中，分为两种ISA的发展，有增量ISA和模块化ISA。
例如X86，就是典型的增量级ISA，这样的话就会不断迭代与发展，但是会给后来学习的人带来极大的学习压力。而且随着时间的发展，有些古早的代码已经很难发现他的功能及作用了。

例如RISC-V由1个基本整数指令集+多个可选的扩展指令集组成，基础指令集是固定的，永远都不会变。例如Steam中本地+DLC的形式。

基本整数指令集也分为四种：
- RV32I：32位整数指令集
- RV32E：RV32I的子集，用于嵌入式场景。
- RV64I：64位整数指令集
- RV128I：128位整数指令集。
同时高位指令集会向下兼容低位指令集。

扩展模块就有很多：
- M：整数乘法与除法指令集
- A：存储器的原子（Automic）指令集
- F：单精度浮点指令集
- D：双精度浮点指令集
- C：压缩指令集（有一些嵌入式系统希望指令集小于32位，用于一些空间不足的硬件中）

上边的IMAFD被称为通用组合，用英文字母G来表示。


例如：RV64GC，也就是说通用+压缩。


## 通用寄存器
通用寄存器全称是General Purpose Registers。

RISC-V的Unprivileged Specification定义了32个通用寄存器，以及一个PC。
对于RV32I/RV64I/RV128I都是一样的，如果实现支持F/D扩展，则需要额外支持32个浮点寄存器。
RV32E将32个寄存器缩减为16个。

寄存器的宽度是由ISA指定的，RV32的寄存器宽度为32位，RV64的寄存器宽度为64位，以此类推。

每个寄存器具体编程的时候都有特定的用途，并且都有对应的名字，是由RISC-V的Application Binary Interface（ABI）定义。

## 硬件线程Hart
Hart = Hardware Thread
这个概念是RISC-V独有的概念。

早起都是处理器，一个CPU只能顺序执行一条指令。随着硬件的发展，一个CPU中有两个执行流或者多个执行流。

hart是一种能够独立fetch和execute指令的环境。

## 特权级别
RISC-V的Privileged Specification定义了三个特别级别。
Machine级别是最高的级别，所有的实现都需要支持

